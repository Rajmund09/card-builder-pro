<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Card Builder Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-dark: #0a0a0f;
            --secondary-dark: #1a1a24;
            --tertiary-dark: #2a2a35;
            --accent-blue: #4a6fa5;
            --accent-blue-light: #5a8fd5;
            --accent-purple: #8a4fff;
            --text-primary: #f0f0f0;
            --text-secondary: #b0b0c0;
            --text-muted: #8888a0;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --box-shadow-light: 0 5px 15px rgba(0, 0, 0, 0.2);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --transition-slow: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--primary-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .hidden {
            display: none !important;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--secondary-dark) 0%, var(--primary-dark) 100%);
            padding: 1.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo i {
            font-size: 2rem;
            color: var(--accent-blue-light);
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1.8rem;
            background: linear-gradient(135deg, var(--accent-blue-light), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-controls {
            display: flex;
            gap: 15px;
        }

        /* Main Content */
        main {
            padding: 2rem 0 4rem;
        }

        /* Card Type Selection */
        .card-type-section, .theme-section, .builder-section {
            background-color: var(--secondary-dark);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(255, 255, 255, 0.05);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--text-primary);
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 1.8rem;
            position: relative;
            padding-bottom: 15px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
            border-radius: 2px;
        }

        .section-subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        /* Card Type Grid */
        .card-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.8rem;
            margin-top: 1.5rem;
        }

        @media (max-width: 768px) {
            .card-type-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
        }

        @media (max-width: 576px) {
            .card-type-grid {
                grid-template-columns: 1fr;
            }
        }

        .card-type {
            background-color: var(--tertiary-dark);
            border-radius: var(--border-radius);
            padding: 2rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .card-type::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
            transform: scaleX(0);
            transition: var(--transition);
            transform-origin: left;
        }

        .card-type:hover {
            transform: translateY(-8px);
            box-shadow: var(--box-shadow);
            border-color: rgba(74, 111, 165, 0.3);
        }

        .card-type:hover::before {
            transform: scaleX(1);
        }

        .card-type .icon {
            font-size: 3rem;
            margin-bottom: 1.2rem;
            display: inline-block;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card-type h3 {
            color: var(--text-primary);
            margin-bottom: 0.8rem;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .card-type p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Theme Selection */
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 1.8rem;
            margin: 2rem 0;
        }

        @media (max-width: 768px) {
            .theme-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .theme-grid {
                grid-template-columns: 1fr;
            }
        }

        .theme-option {
            height: 160px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            transition: var(--transition);
            box-shadow: var(--box-shadow-light);
            position: relative;
            overflow: hidden;
        }

        .theme-option::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: var(--transition);
        }

        .theme-option:hover {
            transform: scale(1.05);
        }

        .theme-option:hover::after {
            opacity: 1;
        }

        .theme-option.selected {
            box-shadow: 0 0 0 3px var(--accent-blue-light);
        }

        .theme-option h3 {
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
            z-index: 1;
        }

        .theme-option p {
            font-size: 0.9rem;
            opacity: 0.9;
            z-index: 1;
        }

        /* Builder Section */
        .builder-container {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 2.5rem;
            margin-top: 1.5rem;
        }

        @media (max-width: 1100px) {
            .builder-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
        }

        /* Card Preview */
        .card-preview-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .card-preview-wrapper {
            width: 100%;
            max-width: 500px;
            perspective: 1000px;
            margin-bottom: 2rem;
        }

        .card-preview {
            width: 100%;
            height: 320px;
            background-color: var(--accent-blue);
            border-radius: 18px;
            padding: 2rem;
            box-shadow: var(--box-shadow);
            display: flex;
            flex-direction: column;
            justify-content: center;
            color: white;
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            transition: var(--transition);
        }

        .card-preview:hover {
            transform: translateY(-5px) rotateX(2deg);
        }

        .card-content {
            z-index: 2;
            position: relative;
        }

        .card-preview h3 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .card-preview p {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .contact-info p {
            font-size: 0.95rem;
            margin-bottom: 0.3rem;
            opacity: 0.9;
        }

        .preview-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            width: 100%;
        }

        /* Customization Controls */
        .customization-controls {
            background-color: var(--tertiary-dark);
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--box-shadow-light);
            border: 1px solid rgba(255, 255, 255, 0.05);
            max-height: 900px;
            overflow-y: auto;
        }

        .customization-controls::-webkit-scrollbar {
            width: 8px;
        }

        .customization-controls::-webkit-scrollbar-track {
            background: var(--secondary-dark);
            border-radius: 4px;
        }

        .customization-controls::-webkit-scrollbar-thumb {
            background: var(--accent-blue);
            border-radius: 4px;
        }

        .control-group {
            margin-bottom: 2rem;
            padding-bottom: 1.8rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .control-group:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .control-group h3 {
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .control-group h3 i {
            color: var(--accent-blue-light);
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.2rem;
        }

        .control {
            margin-bottom: 1.2rem;
        }

        .control label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: 500;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .control-input {
            width: 100%;
            padding: 0.9rem 1rem;
            background-color: var(--secondary-dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 1rem;
            color: var(--text-primary);
            transition: var(--transition);
        }

        .control-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 2px rgba(74, 111, 165, 0.2);
        }

        textarea.control-input {
            min-height: 100px;
            resize: vertical;
        }

        .input-with-icon {
            position: relative;
        }

        .input-with-icon i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        /* Slider Control */
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider-value {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
            color: var(--accent-blue-light);
        }

        .slider {
            flex-grow: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: var(--secondary-dark);
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-blue);
            cursor: pointer;
            border: 2px solid var(--primary-dark);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        /* Color Picker Wrapper */
        .color-picker-wrapper {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .color-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background-color: var(--accent-blue);
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--secondary-dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 3px;
            background-color: var(--text-primary);
            transition: var(--transition);
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--accent-blue);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(28px);
        }

        /* Buttons */
        .btn {
            padding: 0.9rem 1.8rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.7rem;
            white-space: nowrap;
        }

        .btn.primary {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            color: white;
            box-shadow: 0 5px 15px rgba(74, 111, 165, 0.3);
        }

        .btn.primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(74, 111, 165, 0.4);
        }

        .btn.secondary {
            background-color: var(--tertiary-dark);
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn.secondary:hover {
            background-color: rgba(255, 255, 255, 0.05);
            transform: translateY(-2px);
        }

        .btn.danger {
            background-color: var(--danger);
            color: white;
        }

        .btn.danger:hover {
            background-color: #d32f2f;
            transform: translateY(-2px);
        }

        .btn.small {
            padding: 0.6rem 1.2rem;
            font-size: 0.9rem;
        }

        .btn.full-width {
            width: 100%;
        }

        .builder-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        /* Progress Steps */
        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 3rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 3px;
            background-color: var(--tertiary-dark);
            transform: translateY(-50%);
            z-index: 1;
        }

        .progress-bar {
            position: absolute;
            top: 50%;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
            transform: translateY(-50%);
            z-index: 2;
            transition: var(--transition-slow);
            width: 0%;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 3;
            width: 100px;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--tertiary-dark);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 10px;
            border: 3px solid var(--tertiary-dark);
            transition: var(--transition);
        }

        .step.active .step-circle {
            background-color: var(--accent-blue);
            color: white;
            border-color: var(--accent-blue-light);
            box-shadow: 0 0 0 5px rgba(74, 111, 165, 0.2);
        }

        .step.completed .step-circle {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }

        .step-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: center;
            font-weight: 500;
        }

        .step.active .step-label {
            color: var(--accent-blue-light);
            font-weight: 600;
        }

        /* Footer */
        footer {
            background-color: var(--secondary-dark);
            color: var(--text-secondary);
            padding: 2.5rem 0;
            margin-top: 3rem;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--accent-blue-light);
        }

        .copyright {
            margin-top: 1.5rem;
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--tertiary-dark);
            color: var(--text-primary);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: var(--box-shadow);
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition);
            border-left: 4px solid var(--accent-blue);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast i {
            font-size: 1.5rem;
            color: var(--accent-blue-light);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--tertiary-dark);
            color: var(--text-primary);
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .card-type-section, .theme-section, .builder-section {
                padding: 1.5rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .builder-buttons {
                flex-direction: column;
            }
            
            .btn.full-width {
                width: 100%;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
            
            .card-preview {
                height: 280px;
                padding: 1.5rem;
            }
            
            .card-preview h3 {
                font-size: 1.5rem;
            }
            
            .progress-steps {
                margin-bottom: 2rem;
            }
            
            .step {
                width: 70px;
            }
            
            .step-circle {
                width: 35px;
                height: 35px;
            }
            
            .step-label {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-layer-group"></i>
                    <h1>CardCraft Pro</h1>
                </div>
                <div class="header-controls">
                    <button id="export-all-btn" class="btn secondary small">
                        <i class="fas fa-file-export"></i> Export All
                    </button>
                    <button id="dark-mode-toggle" class="btn secondary small">
                        <i class="fas fa-moon"></i> Theme
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Steps -->
    <div class="container">
        <div class="progress-steps">
            <div class="progress-bar" id="progress-bar"></div>
            <div class="step active" id="step-1">
                <div class="step-circle">1</div>
                <div class="step-label">Card Type</div>
            </div>
            <div class="step" id="step-2">
                <div class="step-circle">2</div>
                <div class="step-label">Theme</div>
            </div>
            <div class="step" id="step-3">
                <div class="step-circle">3</div>
                <div class="step-label">Customize</div>
            </div>
            <div class="step" id="step-4">
                <div class="step-circle">4</div>
                <div class="step-label">Export</div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container">
        <!-- Card Type Selection -->
        <section class="card-type-section" id="card-type-section">
            <h2 class="section-title">Choose Your Card Type</h2>
            <p class="section-subtitle">Select a card type to get started with pre-filled content and styling</p>
            <div class="card-type-grid">
                <div class="card-type" data-type="business">
                    <div class="icon"><i class="fas fa-briefcase"></i></div>
                    <h3>Business Card</h3>
                    <p>Professional cards for networking and corporate identity</p>
                </div>
                <div class="card-type" data-type="birthday">
                    <div class="icon"><i class="fas fa-birthday-cake"></i></div>
                    <h3>Birthday Card</h3>
                    <p>Celebrate special days with personalized greetings</p>
                </div>
                <div class="card-type" data-type="holiday">
                    <div class="icon"><i class="fas fa-gift"></i></div>
                    <h3>Holiday Card</h3>
                    <p>Seasonal greetings for any holiday occasion</p>
                </div>
                <div class="card-type" data-type="wedding">
                    <div class="icon"><i class="fas fa-ring"></i></div>
                    <h3>Wedding Card</h3>
                    <p>Elegant invitations and announcements</p>
                </div>
                <div class="card-type" data-type="thankyou">
                    <div class="icon"><i class="fas fa-heart"></i></div>
                    <h3>Thank You Card</h3>
                    <p>Show your appreciation with personalized messages</p>
                </div>
                <div class="card-type" data-type="invitation">
                    <div class="icon"><i class="fas fa-calendar-alt"></i></div>
                    <h3>Invitation Card</h3>
                    <p>Beautiful invites for any event or celebration</p>
                </div>
                <div class="card-type" data-type="anniversary">
                    <div class="icon"><i class="fas fa-glass-cheers"></i></div>
                    <h3>Anniversary Card</h3>
                    <p>Celebrate milestones and special occasions</p>
                </div>
                <div class="card-type" data-type="graduation">
                    <div class="icon"><i class="fas fa-graduation-cap"></i></div>
                    <h3>Graduation Card</h3>
                    <p>Congratulate academic achievements</p>
                </div>
            </div>
        </section>

        <!-- Theme Selection -->
        <section class="theme-section hidden" id="theme-section">
            <h2 class="section-title">Select a Theme</h2>
            <p class="section-subtitle">Choose a design theme that matches your style and occasion</p>
            <div class="theme-grid" id="theme-grid"></div>
            <div class="builder-buttons">
                <button id="back-to-card-types" class="btn secondary">
                    <i class="fas fa-arrow-left"></i> Back to Card Types
                </button>
                <button id="skip-to-builder" class="btn secondary">
                    Skip to Builder <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </section>

        <!-- Card Builder -->
        <section class="builder-section hidden" id="builder-section">
            <h2 class="section-title">Customize Your Card</h2>
            <p class="section-subtitle">Adjust every detail of your card design with real-time preview</p>
            
            <div class="builder-container">
                <!-- Card Preview -->
                <div class="card-preview-container">
                    <div class="card-preview-wrapper">
                        <div class="card-preview" id="card-preview">
                            <div class="card-content">
                                <h3 id="preview-title">Your Name</h3>
                                <p id="preview-text">Your message goes here. Customize this text to create the perfect card for your occasion.</p>
                                <div class="contact-info" id="preview-contact">
                                    <p>Email: example@email.com</p>
                                    <p>Phone: (123) 456-7890</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="preview-controls">
                        <button id="flip-card-btn" class="btn secondary tooltip">
                            <i class="fas fa-sync-alt"></i> Flip Card
                            <span class="tooltip-text">Flip the card to see the back side</span>
                        </button>
                        <button id="download-png-btn" class="btn primary">
                            <i class="fas fa-download"></i> Download PNG
                        </button>
                        <button id="download-pdf-btn" class="btn secondary">
                            <i class="fas fa-file-pdf"></i> PDF
                        </button>
                    </div>
                    
                    <div class="preview-controls" style="margin-top: 15px;">
                        <button id="share-card-btn" class="btn secondary small">
                            <i class="fas fa-share-alt"></i> Share
                        </button>
                        <button id="save-template-btn" class="btn secondary small">
                            <i class="fas fa-save"></i> Save Template
                        </button>
                        <button id="reset-card-btn" class="btn danger small">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                </div>

                <!-- Customization Controls -->
                <div class="customization-controls">
                    <div class="control-group">
                        <h3><i class="fas fa-palette"></i> Design & Layout</h3>
                        <div class="controls-grid">
                            <div class="control">
                                <label for="theme-select">Card Theme:</label>
                                <select id="theme-select" class="control-input">
                                    <option value="modern">Modern</option>
                                    <option value="elegant">Elegant</option>
                                    <option value="fun">Fun</option>
                                    <option value="minimal">Minimal</option>
                                    <option value="colorful">Colorful</option>
                                    <option value="corporate">Corporate</option>
                                    <option value="vintage">Vintage</option>
                                </select>
                            </div>
                            
                            <div class="control">
                                <label for="color-picker">Primary Color:</label>
                                <div class="color-picker-wrapper">
                                    <div class="color-preview" id="color-preview"></div>
                                    <input type="color" id="color-picker" class="control-input" value="#4a6fa5" style="height: 40px; padding: 0;">
                                </div>
                            </div>
                            
                            <div class="control">
                                <label for="font-select">Font Family:</label>
                                <select id="font-select" class="control-input">
                                    <option value="'Poppins', sans-serif">Poppins</option>
                                    <option value="'Montserrat', sans-serif">Montserrat</option>
                                    <option value="Arial, sans-serif">Arial</option>
                                    <option value="'Times New Roman', serif">Times New Roman</option>
                                    <option value="'Georgia', serif">Georgia</option>
                                    <option value="'Courier New', monospace">Courier New</option>
                                </select>
                            </div>
                            
                            <div class="control">
                                <label for="card-layout">Card Layout:</label>
                                <select id="card-layout" class="control-input">
                                    <option value="standard">Standard</option>
                                    <option value="centered">Centered</option>
                                    <option value="split">Split Layout</option>
                                    <option value="modern">Modern</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="controls-grid" style="margin-top: 15px;">
                            <div class="control">
                                <label for="border-radius-slider">Border Radius:</label>
                                <div class="slider-container">
                                    <input type="range" min="0" max="30" value="12" class="slider" id="border-radius-slider">
                                    <span class="slider-value" id="border-radius-value">12px</span>
                                </div>
                            </div>
                            
                            <div class="control">
                                <label for="shadow-toggle">Enable Shadow:</label>
                                <div style="display: flex; align-items: center; gap: 15px; margin-top: 10px;">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="shadow-toggle" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <span id="shadow-status">On</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h3><i class="fas fa-edit"></i> Content & Text</h3>
                        <div class="controls-grid">
                            <div class="control">
                                <label for="title-input">Title/Name:</label>
                                <div class="input-with-icon">
                                    <input type="text" id="title-input" class="control-input" placeholder="Enter title or name">
                                    <i class="fas fa-heading"></i>
                                </div>
                            </div>
                            
                            <div class="control">
                                <label for="subtitle-input">Subtitle/Role:</label>
                                <div class="input-with-icon">
                                    <input type="text" id="subtitle-input" class="control-input" placeholder="Enter subtitle or role">
                                    <i class="fas fa-text-height"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="control">
                            <label for="text-input">Card Message:</label>
                            <textarea id="text-input" class="control-input" placeholder="Enter your card message"></textarea>
                        </div>
                        
                        <div class="controls-grid">
                            <div class="control">
                                <label for="contact-input">Contact Info:</label>
                                <textarea id="contact-input" class="control-input" placeholder="Enter contact information" rows="3"></textarea>
                            </div>
                            
                            <div class="control">
                                <label for="footer-input">Footer Text:</label>
                                <textarea id="footer-input" class="control-input" placeholder="Enter footer text" rows="3"></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h3><i class="fas fa-image"></i> Images & Icons</h3>
                        <div class="controls-grid">
                            <div class="control">
                                <label for="bg-image">Background Image:</label>
                                <input type="file" id="bg-image" class="control-input" accept="image/*">
                            </div>
                            
                            <div class="control">
                                <label for="logo-image">Logo/Icon:</label>
                                <input type="file" id="logo-image" class="control-input" accept="image/*">
                            </div>
                        </div>
                        
                        <div class="controls-grid" style="margin-top: 15px;">
                            <div class="control">
                                <label for="icon-select">Select Icon:</label>
                                <select id="icon-select" class="control-input">
                                    <option value="">No Icon</option>
                                    <option value="fas fa-heart">Heart</option>
                                    <option value="fas fa-star">Star</option>
                                    <option value="fas fa-gem">Gem</option>
                                    <option value="fas fa-leaf">Leaf</option>
                                    <option value="fas fa-coffee">Coffee</option>
                                    <option value="fas fa-graduation-cap">Graduation Cap</option>
                                </select>
                            </div>
                            
                            <div class="control">
                                <label for="icon-color">Icon Color:</label>
                                <input type="color" id="icon-color" class="control-input" value="#ffffff" style="height: 40px; padding: 0;">
                            </div>
                        </div>
                        
                        <button id="add-sample-image" class="btn secondary full-width" style="margin-top: 15px;">
                            <i class="fas fa-plus"></i> Add Sample Image
                        </button>
                    </div>

                    <div class="builder-buttons">
                        <button id="save-design-btn" class="btn primary full-width">
                            <i class="fas fa-save"></i> Save Design
                        </button>
                        <button id="start-new-card-btn" class="btn secondary full-width">
                            <i class="fas fa-plus-circle"></i> Start New Card
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i class="fas fa-check-circle"></i>
        <div class="toast-content">
            <div class="toast-title" id="toast-title">Success!</div>
            <div class="toast-message" id="toast-message">Your action was completed successfully.</div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#"><i class="fas fa-question-circle"></i> Help & Tutorials</a>
                    <a href="#"><i class="fas fa-share-alt"></i> Share</a>
                    <a href="#"><i class="fas fa-envelope"></i> Contact</a>
                    <a href="#"><i class="fas fa-file-contract"></i> Terms</a>
                    <a href="#"><i class="fas fa-lock"></i> Privacy</a>
                </div>
                <div class="copyright">
                    <p>Dynamic Card Builder Pro &copy; <span id="current-year"></span> - Create professional cards for any occasion</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Enhanced Card Builder with Professional Features
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize current year
            document.getElementById('current-year').textContent = new Date().getFullYear();
            
            // DOM Elements
            const cardTypeSection = document.getElementById('card-type-section');
            const themeSection = document.getElementById('theme-section');
            const builderSection = document.getElementById('builder-section');
            const cardTypeGrid = document.querySelector('.card-type-grid');
            const themeGrid = document.getElementById('theme-grid');
            const backToCardTypesBtn = document.getElementById('back-to-card-types');
            const skipToBuilderBtn = document.getElementById('skip-to-builder');
            const startNewCardBtn = document.getElementById('start-new-card-btn');
            const resetCardBtn = document.getElementById('reset-card-btn');
            const saveDesignBtn = document.getElementById('save-design-btn');
            const downloadPngBtn = document.getElementById('download-png-btn');
            const downloadPdfBtn = document.getElementById('download-pdf-btn');
            const shareCardBtn = document.getElementById('share-card-btn');
            const saveTemplateBtn = document.getElementById('save-template-btn');
            const flipCardBtn = document.getElementById('flip-card-btn');
            const addSampleImageBtn = document.getElementById('add-sample-image');
            const exportAllBtn = document.getElementById('export-all-btn');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            
            // Progress steps
            const progressBar = document.getElementById('progress-bar');
            const step1 = document.getElementById('step-1');
            const step2 = document.getElementById('step-2');
            const step3 = document.getElementById('step-3');
            const step4 = document.getElementById('step-4');
            
            // Preview elements
            const cardPreview = document.getElementById('card-preview');
            const previewTitle = document.getElementById('preview-title');
            const previewText = document.getElementById('preview-text');
            const previewContact = document.getElementById('preview-contact');
            const colorPreview = document.getElementById('color-preview');
            
            // Input elements
            const themeSelect = document.getElementById('theme-select');
            const colorPicker = document.getElementById('color-picker');
            const fontSelect = document.getElementById('font-select');
            const cardLayoutSelect = document.getElementById('card-layout');
            const borderRadiusSlider = document.getElementById('border-radius-slider');
            const borderRadiusValue = document.getElementById('border-radius-value');
            const shadowToggle = document.getElementById('shadow-toggle');
            const shadowStatus = document.getElementById('shadow-status');
            const titleInput = document.getElementById('title-input');
            const subtitleInput = document.getElementById('subtitle-input');
            const textInput = document.getElementById('text-input');
            const contactInput = document.getElementById('contact-input');
            const footerInput = document.getElementById('footer-input');
            const bgImageInput = document.getElementById('bg-image');
            const logoImageInput = document.getElementById('logo-image');
            const iconSelect = document.getElementById('icon-select');
            const iconColor = document.getElementById('icon-color');
            
            // Toast
            const toast = document.getElementById('toast');
            const toastTitle = document.getElementById('toast-title');
            const toastMessage = document.getElementById('toast-message');
            
            // Current card data
            let currentCardType = '';
            let currentTheme = 'modern';
            let currentCardData = {};
            let isCardFlipped = false;
            let cardBackgroundImage = '';
            let cardLogo = '';
            let savedDesigns = [];
            
            // Theme data with enhanced options
            const themes = {
                modern: { 
                    name: 'Modern', 
                    color: '#4a6fa5', 
                    gradient: 'linear-gradient(135deg, #4a6fa5 0%, #2c3e50 100%)',
                    font: "'Poppins', sans-serif",
                    pattern: 'none'
                },
                elegant: { 
                    name: 'Elegant', 
                    color: '#8b7355', 
                    gradient: 'linear-gradient(135deg, #8b7355 0%, #5d4c3c 100%)',
                    font: "'Montserrat', sans-serif",
                    pattern: 'none'
                },
                fun: { 
                    name: 'Fun', 
                    color: '#e74c3c', 
                    gradient: 'linear-gradient(135deg, #e74c3c 0%, #f39c12 100%)',
                    font: "'Poppins', sans-serif",
                    pattern: 'none'
                },
                minimal: { 
                    name: 'Minimal', 
                    color: '#34495e', 
                    gradient: 'linear-gradient(135deg, #34495e 0%, #2c3e50 100%)',
                    font: "'Montserrat', sans-serif",
                    pattern: 'none'
                },
                colorful: { 
                    name: 'Colorful', 
                    color: '#9b59b6', 
                    gradient: 'linear-gradient(135deg, #9b59b6 0%, #3498db 100%)',
                    font: "'Poppins', sans-serif",
                    pattern: 'none'
                },
                corporate: { 
                    name: 'Corporate', 
                    color: '#2c3e50', 
                    gradient: 'linear-gradient(135deg, #2c3e50 0%, #1a2530 100%)',
                    font: "'Montserrat', sans-serif",
                    pattern: 'none'
                },
                vintage: { 
                    name: 'Vintage', 
                    color: '#8b5a2b', 
                    gradient: 'linear-gradient(135deg, #8b5a2b 0%, #654321 100%)',
                    font: "'Times New Roman', serif",
                    pattern: 'none'
                }
            };
            
            // Card type data with default content
            const cardTypes = {
                business: {
                    title: 'John Doe',
                    subtitle: 'Marketing Director',
                    text: 'Specializing in digital marketing strategies and brand development. Over 10 years of experience in the industry.',
                    contact: 'Email: john.doe@example.com\nPhone: (123) 456-7890\nWebsite: www.johndoe.com\nOffice: 123 Business Ave, Suite 100',
                    footer: 'Follow us on social media: @johndoe',
                    defaultTheme: 'modern',
                    icon: 'fas fa-briefcase'
                },
                birthday: {
                    title: 'Happy Birthday!',
                    subtitle: 'Celebrating You',
                    text: 'Wishing you a day filled with happiness and joy! May all your dreams and wishes come true on this special day.',
                    contact: 'With love,\nYour Family & Friends',
                    footer: 'Make a wish!',
                    defaultTheme: 'fun',
                    icon: 'fas fa-birthday-cake'
                },
                holiday: {
                    title: 'Season\'s Greetings',
                    subtitle: 'Happy Holidays',
                    text: 'Wishing you peace, joy, and happiness this holiday season. May your home be filled with love and laughter.',
                    contact: 'Warmest wishes,\nThe Johnson Family',
                    footer: 'Merry Christmas & Happy New Year!',
                    defaultTheme: 'colorful',
                    icon: 'fas fa-gift'
                },
                wedding: {
                    title: 'Save the Date',
                    subtitle: 'John & Jane',
                    text: 'Join us as we celebrate our wedding day! Your presence would mean the world to us as we begin our journey together.',
                    contact: 'Date: October 15, 2023\nTime: 3:00 PM\nVenue: Grand Garden Resort\nAddress: 123 Celebration Lane',
                    footer: 'Formal Attire | RSVP by September 15',
                    defaultTheme: 'elegant',
                    icon: 'fas fa-ring'
                },
                thankyou: {
                    title: 'Thank You',
                    subtitle: 'With Gratitude',
                    text: 'We appreciate your kindness and support more than words can express. Your generosity has made a significant difference.',
                    contact: 'Sincerely,\nThe Johnson Family',
                    footer: 'With heartfelt thanks',
                    defaultTheme: 'minimal',
                    icon: 'fas fa-heart'
                },
                invitation: {
                    title: 'You\'re Invited!',
                    subtitle: '10th Anniversary Celebration',
                    text: 'Please join us for a celebration of our 10th anniversary. An evening of dining, dancing, and memories awaits.',
                    contact: 'Date: November 20, 2023\nTime: 6:00 PM\nLocation: City Convention Center\nRSVP: (555) 123-4567',
                    footer: 'Cocktail Attire | Please RSVP by November 1',
                    defaultTheme: 'elegant',
                    icon: 'fas fa-calendar-alt'
                },
                anniversary: {
                    title: 'Happy Anniversary',
                    subtitle: '25 Years Together',
                    text: 'Celebrating 25 years of love, laughter, and cherished memories. Thank you for being by my side through it all.',
                    contact: 'With all my love,\nYour Partner',
                    footer: 'Here\'s to many more years together',
                    defaultTheme: 'elegant',
                    icon: 'fas fa-glass-cheers'
                },
                graduation: {
                    title: 'Congratulations!',
                    subtitle: 'Class of 2023',
                    text: 'Congratulations on your outstanding achievement! Your hard work and dedication have paid off. The future is bright!',
                    contact: 'With pride,\nYour Family',
                    footer: 'Follow your dreams!',
                    defaultTheme: 'colorful',
                    icon: 'fas fa-graduation-cap'
                }
            };
            
            // Show toast notification
            function showToast(title, message, type = 'success') {
                toastTitle.textContent = title;
                toastMessage.textContent = message;
                
                // Set color based on type
                if (type === 'error') {
                    toast.style.borderLeftColor = 'var(--danger)';
                    toast.querySelector('i').className = 'fas fa-exclamation-circle';
                    toast.querySelector('i').style.color = 'var(--danger)';
                } else if (type === 'warning') {
                    toast.style.borderLeftColor = 'var(--warning)';
                    toast.querySelector('i').className = 'fas fa-exclamation-triangle';
                    toast.querySelector('i').style.color = 'var(--warning)';
                } else {
                    toast.style.borderLeftColor = 'var(--accent-blue)';
                    toast.querySelector('i').className = 'fas fa-check-circle';
                    toast.querySelector('i').style.color = 'var(--accent-blue-light)';
                }
                
                toast.classList.add('show');
                
                // Auto hide after 3 seconds
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
            
            // Update progress bar
            function updateProgress(currentStep) {
                const steps = [step1, step2, step3, step4];
                const progressWidths = ['0%', '33%', '66%', '100%'];
                
                steps.forEach((step, index) => {
                    if (index < currentStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (index === currentStep - 1) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                });
                
                progressBar.style.width = progressWidths[currentStep - 1];
            }
            
            // Initialize theme options
            function initializeThemes() {
                themeGrid.innerHTML = '';
                
                for (const themeId in themes) {
                    const theme = themes[themeId];
                    const themeOption = document.createElement('div');
                    themeOption.className = 'theme-option';
                    themeOption.dataset.theme = themeId;
                    themeOption.style.background = theme.gradient;
                    
                    themeOption.innerHTML = `
                        <h3>${theme.name}</h3>
                        <p>${themeId === currentTheme ? 'Selected' : 'Click to select'}</p>
                    `;
                    
                    if (themeId === currentTheme) {
                        themeOption.classList.add('selected');
                    }
                    
                    themeOption.addEventListener('click', function() {
                        // Remove selected class from all themes
                        document.querySelectorAll('.theme-option').forEach(el => {
                            el.classList.remove('selected');
                        });
                        
                        // Add selected class to clicked theme
                        this.classList.add('selected');
                        selectTheme(themeId);
                    });
                    
                    themeGrid.appendChild(themeOption);
                }
            }
            
            // Select card type
            cardTypeGrid.addEventListener('click', function(e) {
                const cardTypeElement = e.target.closest('.card-type');
                if (cardTypeElement) {
                    currentCardType = cardTypeElement.dataset.type;
                    currentTheme = cardTypes[currentCardType].defaultTheme;
                    
                    // Update UI
                    cardTypeSection.classList.add('hidden');
                    themeSection.classList.remove('hidden');
                    updateProgress(2);
                    
                    // Initialize themes for this card type
                    initializeThemes();
                    
                    showToast('Card Type Selected', `You've selected ${cardTypeElement.querySelector('h3').textContent}`, 'success');
                }
            });
            
            // Select theme
            function selectTheme(themeId) {
                currentTheme = themeId;
                themeSection.classList.add('hidden');
                builderSection.classList.remove('hidden');
                updateProgress(3);
                
                // Set up card with selected type and theme
                setupCardBuilder();
                
                showToast('Theme Applied', `Applied ${themes[themeId].name} theme to your card`, 'success');
            }
            
            // Back to card types
            backToCardTypesBtn.addEventListener('click', function() {
                themeSection.classList.add('hidden');
                cardTypeSection.classList.remove('hidden');
                updateProgress(1);
            });
            
            // Skip to builder
            skipToBuilderBtn.addEventListener('click', function() {
                if (!currentCardType) {
                    currentCardType = 'business';
                    currentTheme = 'modern';
                }
                
                themeSection.classList.add('hidden');
                builderSection.classList.remove('hidden');
                updateProgress(3);
                setupCardBuilder();
            });
            
            // Start new card
            startNewCardBtn.addEventListener('click', function() {
                builderSection.classList.add('hidden');
                cardTypeSection.classList.remove('hidden');
                updateProgress(1);
                resetCard();
                showToast('New Card Started', 'Select a card type to begin', 'success');
            });
            
            // Reset card
            resetCardBtn.addEventListener('click', function() {
                resetCard();
                showToast('Card Reset', 'Card has been reset to default settings', 'warning');
            });
            
            // Setup card builder with selected type and theme
            function setupCardBuilder() {
                const cardData = cardTypes[currentCardType];
                const themeData = themes[currentTheme];
                
                // Store current card data
                currentCardData = {
                    type: currentCardType,
                    theme: currentTheme,
                    ...cardData
                };
                
                // Set default values
                titleInput.value = cardData.title;
                subtitleInput.value = cardData.subtitle || '';
                textInput.value = cardData.text;
                contactInput.value = cardData.contact;
                footerInput.value = cardData.footer || '';
                themeSelect.value = currentTheme;
                colorPicker.value = themeData.color;
                colorPreview.style.backgroundColor = themeData.color;
                fontSelect.value = themeData.font;
                iconSelect.value = cardData.icon || '';
                
                // Update preview
                updatePreview();
                
                // Set theme-specific styling
                applyTheme(themeData);
            }
            
            // Apply theme to card
            function applyTheme(themeData) {
                cardPreview.style.background = themeData.gradient;
                cardPreview.style.fontFamily = themeData.font;
                colorPicker.value = themeData.color;
                colorPreview.style.backgroundColor = themeData.color;
            }
            
            // Update card preview
            function updatePreview() {
                previewTitle.textContent = titleInput.value || 'Your Title';
                previewText.textContent = textInput.value || 'Your message goes here. Customize this text to create the perfect card for your occasion.';
                
                // Format contact info with line breaks
                if (contactInput.value.trim()) {
                    const contactLines = contactInput.value.split('\n');
                    previewContact.innerHTML = contactLines.map(line => `<p>${line}</p>`).join('');
                } else {
                    previewContact.innerHTML = '';
                }
                
                // Apply selected color
                if (colorPicker.value) {
                    cardPreview.style.backgroundColor = colorPicker.value;
                    colorPreview.style.backgroundColor = colorPicker.value;
                    
                    // Create a gradient from the selected color
                    const colorRgb = hexToRgb(colorPicker.value);
                    const darkerColor = `rgb(${Math.max(colorRgb.r - 30, 0)}, ${Math.max(colorRgb.g - 30, 0)}, ${Math.max(colorRgb.b - 30, 0)})`;
                    cardPreview.style.background = `linear-gradient(135deg, ${colorPicker.value} 0%, ${darkerColor} 100%)`;
                }
                
                // Apply selected font
                if (fontSelect.value) {
                    cardPreview.style.fontFamily = fontSelect.value;
                }
                
                // Apply border radius
                const borderRadius = borderRadiusSlider.value + 'px';
                cardPreview.style.borderRadius = borderRadius;
                borderRadiusValue.textContent = borderRadius;
                
                // Apply shadow
                if (shadowToggle.checked) {
                    cardPreview.style.boxShadow = 'var(--box-shadow)';
                    shadowStatus.textContent = 'On';
                } else {
                    cardPreview.style.boxShadow = 'none';
                    shadowStatus.textContent = 'Off';
                }
                
                // Apply icon
                applyIcon();
            }
            
            // Convert hex to RGB
            function hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : { r: 0, g: 0, b: 0 };
            }
            
            // Apply icon to card
            function applyIcon() {
                // Remove existing icon
                const existingIcon = cardPreview.querySelector('.card-icon');
                if (existingIcon) {
                    existingIcon.remove();
                }
                
                // Add new icon if selected
                if (iconSelect.value) {
                    const icon = document.createElement('div');
                    icon.className = 'card-icon';
                    icon.innerHTML = `<i class="${iconSelect.value}"></i>`;
                    icon.style.position = 'absolute';
                    icon.style.top = '20px';
                    icon.style.right = '20px';
                    icon.style.fontSize = '2.5rem';
                    icon.style.color = iconColor.value;
                    icon.style.opacity = '0.8';
                    icon.style.zIndex = '1';
                    
                    cardPreview.appendChild(icon);
                }
            }
            
            // Reset card to defaults
            function resetCard() {
                const cardData = cardTypes[currentCardType] || cardTypes.business;
                const themeData = themes[currentTheme] || themes.modern;
                
                titleInput.value = cardData.title;
                subtitleInput.value = cardData.subtitle || '';
                textInput.value = cardData.text;
                contactInput.value = cardData.contact;
                footerInput.value = cardData.footer || '';
                themeSelect.value = currentTheme;
                colorPicker.value = themeData.color;
                colorPreview.style.backgroundColor = themeData.color;
                fontSelect.value = themeData.font;
                cardLayoutSelect.value = 'standard';
                borderRadiusSlider.value = 12;
                shadowToggle.checked = true;
                iconSelect.value = cardData.icon || '';
                iconColor.value = '#ffffff';
                
                // Reset background images
                cardBackgroundImage = '';
                cardLogo = '';
                cardPreview.style.backgroundImage = '';
                
                // Clear file inputs
                bgImageInput.value = '';
                logoImageInput.value = '';
                
                updatePreview();
                applyTheme(themeData);
            }
            
            // Save design
            saveDesignBtn.addEventListener('click', function() {
                const cardData = {
                    type: currentCardType,
                    theme: currentTheme,
                    title: titleInput.value,
                    subtitle: subtitleInput.value,
                    text: textInput.value,
                    contact: contactInput.value,
                    footer: footerInput.value,
                    color: colorPicker.value,
                    font: fontSelect.value,
                    layout: cardLayoutSelect.value,
                    borderRadius: borderRadiusSlider.value,
                    shadow: shadowToggle.checked,
                    icon: iconSelect.value,
                    iconColor: iconColor.value,
                    timestamp: new Date().toISOString()
                };
                
                // Save to localStorage
                savedDesigns = JSON.parse(localStorage.getItem('cardDesigns') || '[]');
                savedDesigns.push(cardData);
                localStorage.setItem('cardDesigns', JSON.stringify(savedDesigns));
                
                showToast('Design Saved', 'Your card design has been saved successfully', 'success');
            });
            
            // Download PNG (simulated)
            downloadPngBtn.addEventListener('click', function() {
                showToast('Download Started', 'Your card is being prepared for download as PNG', 'success');
                
                // In a real implementation, this would use a library like html2canvas
                // For now, we'll simulate the download with a JSON file
                simulateDownload('png');
            });
            
            // Download PDF (simulated)
            downloadPdfBtn.addEventListener('click', function() {
                showToast('PDF Generation', 'Your PDF is being generated. This may take a moment.', 'success');
                
                // In a real implementation, this would use a library like jsPDF
                // For now, we'll simulate the download with a JSON file
                simulateDownload('pdf');
            });
            
            // Simulate download
            function simulateDownload(format) {
                const cardData = {
                    type: currentCardType,
                    theme: currentTheme,
                    title: titleInput.value,
                    text: textInput.value,
                    contact: contactInput.value,
                    timestamp: new Date().toISOString()
                };
                
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(cardData, null, 2));
                const downloadAnchor = document.createElement('a');
                downloadAnchor.setAttribute("href", dataStr);
                downloadAnchor.setAttribute("download", `card-design-${Date.now()}.json`);
                document.body.appendChild(downloadAnchor);
                downloadAnchor.click();
                downloadAnchor.remove();
                
                updateProgress(4);
                setTimeout(() => updateProgress(3), 2000);
            }
            
            // Share card
            shareCardBtn.addEventListener('click', function() {
                if (navigator.share) {
                    navigator.share({
                        title: 'Check out my card design!',
                        text: `I created a ${currentCardType} card using CardCraft Pro`,
                        url: window.location.href,
                    })
                    .then(() => showToast('Shared Successfully', 'Your card design has been shared', 'success'))
                    .catch(error => showToast('Sharing Failed', 'Could not share the card design', 'error'));
                } else {
                    showToast('Sharing', 'Copy this link to share your design: ' + window.location.href, 'warning');
                }
            });
            
            // Save template
            saveTemplateBtn.addEventListener('click', function() {
                const templateData = {
                    name: `${currentCardType.charAt(0).toUpperCase() + currentCardType.slice(1)} Template`,
                    type: currentCardType,
                    theme: currentTheme,
                    color: colorPicker.value,
                    font: fontSelect.value,
                    timestamp: new Date().toISOString()
                };
                
                const templates = JSON.parse(localStorage.getItem('cardTemplates') || '[]');
                templates.push(templateData);
                localStorage.setItem('cardTemplates', JSON.stringify(templates));
                
                showToast('Template Saved', 'Your card template has been saved for future use', 'success');
            });
            
            // Flip card
            flipCardBtn.addEventListener('click', function() {
                isCardFlipped = !isCardFlipped;
                
                if (isCardFlipped) {
                    cardPreview.innerHTML = `
                        <div class="card-content" style="text-align: center; padding: 2rem;">
                            <h3 style="margin-bottom: 1.5rem;">Card Back</h3>
                            <p style="margin-bottom: 1.5rem;">This is the back of your card. You can add additional information here.</p>
                            <div class="contact-info">
                                <p>Created with CardCraft Pro</p>
                                <p>${new Date().toLocaleDateString()}</p>
                            </div>
                        </div>
                    `;
                    flipCardBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Flip to Front';
                } else {
                    updatePreview();
                    flipCardBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Flip Card';
                }
            });
            
            // Add sample image
            addSampleImageBtn.addEventListener('click', function() {
                const sampleImages = [
                    'https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                    'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                    'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80'
                ];
                
                const randomImage = sampleImages[Math.floor(Math.random() * sampleImages.length)];
                cardPreview.style.backgroundImage = `url(${randomImage})`;
                cardPreview.style.backgroundSize = 'cover';
                cardPreview.style.backgroundBlendMode = 'overlay';
                
                showToast('Image Added', 'A sample background image has been added to your card', 'success');
            });
            
            // Export all designs
            exportAllBtn.addEventListener('click', function() {
                const savedDesigns = JSON.parse(localStorage.getItem('cardDesigns') || '[]');
                const savedTemplates = JSON.parse(localStorage.getItem('cardTemplates') || '[]');
                
                if (savedDesigns.length === 0 && savedTemplates.length === 0) {
                    showToast('No Data', 'No saved designs or templates to export', 'warning');
                    return;
                }
                
                const exportData = {
                    designs: savedDesigns,
                    templates: savedTemplates,
                    exportDate: new Date().toISOString()
                };
                
                const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(exportData, null, 2));
                const downloadAnchor = document.createElement('a');
                downloadAnchor.setAttribute("href", dataStr);
                downloadAnchor.setAttribute("download", `cardcraft-backup-${Date.now()}.json`);
                document.body.appendChild(downloadAnchor);
                downloadAnchor.click();
                downloadAnchor.remove();
                
                showToast('Export Complete', 'All your designs and templates have been exported', 'success');
            });
            
            // Toggle dark mode (in this case, just for demonstration)
            darkModeToggle.addEventListener('click', function() {
                const currentBg = document.body.style.backgroundColor;
                
                if (currentBg === 'rgb(255, 255, 255)' || !currentBg) {
                    document.body.style.backgroundColor = '#0a0a0f';
                    document.body.style.color = '#f0f0f0';
                    darkModeToggle.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
                    showToast('Dark Mode', 'Switched to dark theme', 'success');
                } else {
                    document.body.style.backgroundColor = '#ffffff';
                    document.body.style.color = '#333333';
                    darkModeToggle.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
                    showToast('Light Mode', 'Switched to light theme', 'success');
                }
            });
            
            // Handle background image upload
            bgImageInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        cardBackgroundImage = event.target.result;
                        cardPreview.style.backgroundImage = `url(${cardBackgroundImage})`;
                        cardPreview.style.backgroundSize = 'cover';
                        cardPreview.style.backgroundBlendMode = 'overlay';
                        showToast('Image Uploaded', 'Background image has been applied to your card', 'success');
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Handle logo image upload
            logoImageInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        cardLogo = event.target.result;
                        // In a full implementation, we would add this as an overlay on the card
                        showToast('Logo Uploaded', 'Logo has been uploaded successfully', 'success');
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Event listeners for real-time updates
            titleInput.addEventListener('input', updatePreview);
            subtitleInput.addEventListener('input', updatePreview);
            textInput.addEventListener('input', updatePreview);
            contactInput.addEventListener('input', updatePreview);
            footerInput.addEventListener('input', updatePreview);
            colorPicker.addEventListener('input', updatePreview);
            fontSelect.addEventListener('change', updatePreview);
            cardLayoutSelect.addEventListener('change', updatePreview);
            borderRadiusSlider.addEventListener('input', updatePreview);
            shadowToggle.addEventListener('change', updatePreview);
            iconSelect.addEventListener('change', updatePreview);
            iconColor.addEventListener('input', updatePreview);
            
            themeSelect.addEventListener('change', function() {
                currentTheme = themeSelect.value;
                const themeData = themes[currentTheme];
                applyTheme(themeData);
                updatePreview();
            });
            
            // Initialize the app
            initializeThemes();
            updateProgress(1);
            
            // Check for saved designs
            savedDesigns = JSON.parse(localStorage.getItem('cardDesigns') || '[]');
            if (savedDesigns.length > 0) {
                console.log(`${savedDesigns.length} saved designs found`);
            }
        });
    </script>
</body>
</html>